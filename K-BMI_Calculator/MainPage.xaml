<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="K_BMI_Calculator.MainPage">

    <ScrollView>
        <VerticalStackLayout Padding="25,0" Spacing="25">

            <!-- Title -->
            <VerticalStackLayout Margin="0,20,0,5" Spacing="2">
                <Label Text="BMI Calculator" FontSize="Title" HorizontalOptions="Center" FontAttributes="Bold" />
                <Label Text="Calculate Body Mass Index (BMI)" FontSize="Subtitle" HorizontalOptions="Center" />
            </VerticalStackLayout>

            <VerticalStackLayout Spacing="15">

                <!-- Input Box -->
                <Frame BackgroundColor="Gray" CornerRadius="5" Padding="15">
                    <VerticalStackLayout>

                        <Label Text="Units" />
                        <Picker x:Name="Units" SelectedIndexChanged="ChangeUnits" SelectedIndex="1">
                            <Picker.Items>
                                <x:String>Imperial</x:String>
                                <x:String>Metric</x:String>
                            </Picker.Items>
                        </Picker>

                        <!-- Imperial: 703 x [LBS / (Inches)^2] -->
                        <VerticalStackLayout x:Name="ImperialUnits" IsVisible="False">
                            <Grid ColumnDefinitions="*,*">
                                <Label Text="Height" Grid.Column="0" />
                                <Label x:Name="HeightImperialLabel" Text="5ft. 6in." Grid.Column="1" HorizontalOptions="End" />
                            </Grid>
                            <Slider x:Name="HeightImperial" Minimum="48" Value="66" Maximum="84" ValueChanged="OnHeightImperialChanged" />
                            <Grid ColumnDefinitions="*,*">
                                <Label Text="Weight" Grid.Column="0" />
                                <Label Text="{Binding Source={x:Reference WeightImperial}, Path=Value, StringFormat='{0:F0} lbs'}" Grid.Column="1" HorizontalOptions="End" />
                            </Grid>
                            <Slider x:Name="WeightImperial" Minimum="50" Value="100" Maximum="400" />
                        </VerticalStackLayout>

                        <!-- Metric: KG / (CM/100)^2 -->
                        <VerticalStackLayout x:Name="MetricUnits" IsVisible="True">
                            <Grid ColumnDefinitions="*,*">
                                <Label Text="Height" Grid.Column="0" />
                                <Label Text="{Binding Source={x:Reference HeightMetric}, Path=Value, StringFormat='{0:F0} cm'}" Grid.Column="1" HorizontalOptions="End" />
                            </Grid>
                            <Slider x:Name="HeightMetric" Minimum="50" Value="170" Maximum="250" />
                            <Grid ColumnDefinitions="*,*">
                                <Label Text="Weight" Grid.Column="0" />
                                <Label Text="{Binding Source={x:Reference WeightMetric}, Path=Value, StringFormat='{0:F0} kg'}" Grid.Column="1" HorizontalOptions="End" />
                            </Grid>
                            <Slider x:Name="WeightMetric" Minimum="20" Value="70" Maximum="300" />
                        </VerticalStackLayout>

                        <Label x:Name="ErrorLabel" Text="Please select a unit first!" IsVisible="False" TextColor="Red" />
                        <Button Text="Calculate" Clicked="CalculateBMI" />

                    </VerticalStackLayout>
                </Frame>

                <!-- Results Box -->
                <Frame BackgroundColor="Gray" CornerRadius="5" Padding="15" HorizontalOptions="Fill">
                    <VerticalStackLayout>

                        <!-- Pre-Results: shown before first calculation -->
                        <VerticalStackLayout x:Name="PreResults" IsVisible="True" HorizontalOptions="Center">
                            <Frame BackgroundColor="DarkGray" Padding="20" CornerRadius="10" HorizontalOptions="Center">
                                <Image Source="icon.png" HeightRequest="60" />
                            </Frame>
                            <Label Text="Enter your details and press Calculate" HorizontalOptions="Center" Margin="0,10,0,0" />
                        </VerticalStackLayout>

                        <!-- Results: shown after calculation -->
                        <VerticalStackLayout x:Name="Results" IsVisible="False">
                            <Frame BackgroundColor="DarkGray" Padding="10" CornerRadius="5" HorizontalOptions="Fill">
                                <VerticalStackLayout>
                                    <Label Text="Your BMI" HorizontalOptions="Center" />
                                    <Label x:Name="BMIValueLabel" FontSize="Large" FontAttributes="Bold" HorizontalOptions="Center" />
                                    <Label x:Name="BMICategoryLabel" HorizontalOptions="Center" />
                                </VerticalStackLayout>
                            </Frame>
                            <Label x:Name="BMIDescriptionLabel" Margin="0,10,0,0" />
                        </VerticalStackLayout>

                    </VerticalStackLayout>
                </Frame>

            </VerticalStackLayout>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>